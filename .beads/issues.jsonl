{"id":"ortus-157","title":"Fix test-lisa.sh not working","description":"test-lisa.sh fails with jq error during interview question generation.\n\nError: jq: error (at \u003cstdin\u003e:15): Cannot index array with string \"description\"\n\nThe issue is in lisa.sh when processing ideas. The script is trying to access .description on an array instead of an object. This suggests bd show --json output format may have changed or the jq parsing logic is incorrect.\n\nSteps to reproduce:\n1. Run ./tests/test-lisa.sh\n2. Lisa starts and finds an idea\n3. Fails during 'Generating interview questions...' step","status":"closed","priority":2,"issue_type":"bug","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T11:48:59.686145512-08:00","created_by":"who","updated_at":"2026-01-19T11:55:59.263640658-08:00","closed_at":"2026-01-19T11:55:59.263640658-08:00","close_reason":"Fixed jq parsing bug - line 243 now uses .[0].description to match bd show --json output format (array)","comments":[{"id":37,"issue_id":"ortus-157","author":"who","text":"Starting work. Plan: run test-lisa.sh --dry-run to reproduce issue, diagnose failure, fix script","created_at":"2026-01-19T19:49:39Z"},{"id":38,"issue_id":"ortus-157","author":"who","text":"Progress: Found bug - lisa.sh checks for 'prd:approved' label but docs say 'approved'. Test uses 'approved'.","created_at":"2026-01-19T19:50:22Z"},{"id":39,"issue_id":"ortus-157","author":"who","text":"Verification: Fixed label mismatch - lisa.sh now checks 'approved' instead of 'prd:approved'. dry-run passes, syntax OK.","created_at":"2026-01-19T19:50:59Z"},{"id":40,"issue_id":"ortus-157","author":"who","text":"Resuming work. Plan: fix jq parsing bug on line 243 - should use .[0].description instead of .description since bd show --json returns an array","created_at":"2026-01-19T19:55:22Z"},{"id":41,"issue_id":"ortus-157","author":"who","text":"Verification: Fixed jq parsing on line 243 to use .[0].description. Both usages now consistent. Syntax check passes, test-lisa.sh --dry-run passes.","created_at":"2026-01-19T19:55:55Z"}]}
{"id":"ortus-1im","title":"Create test suite for ralph.sh with deterministic project","description":"## Summary\n\nCreate an automated test suite that verifies ralph.sh behavior with the new --tasks N option using a deterministic test project.\n\n## Test Setup\n\n1. Generate a test project using the template with Python defaults\n2. Create 3 simple, deterministic beads tasks (e.g., create a file, add a function, add a test)\n3. Tasks should be simple enough that Claude can complete them reliably\n\n## Test Cases\n\n### Test 1: ralph --tasks 1\n- Run `./ralph.sh --tasks 1`\n- Verify exactly 1 task was completed (closed)\n- Verify 2 tasks remain open\n\n### Test 2: ralph (unlimited)\n- Run `./ralph.sh` (no task limit)\n- Verify all remaining tasks are completed\n- Verify 0 tasks remain open\n\n## Implementation Notes\n\n- Use a clean /tmp directory for each test run\n- Tasks should be idempotent and verifiable (e.g., check file exists, function exists)\n- Consider using `bd list --status=closed --json | jq length` to count completed tasks\n- May need to mock or stub Claude calls for true determinism, or accept some flakiness\n\n## Example Deterministic Tasks\n\n```bash\nbd create --title=\"Create src/calculator.py with add function\" --type=task --assignee=ralph\nbd create --title=\"Add subtract function to calculator.py\" --type=task --assignee=ralph  \nbd create --title=\"Add multiply function to calculator.py\" --type=task --assignee=ralph\n```\n\n## Acceptance Criteria\n\n- [ ] Test script exists (e.g., test-ralph.sh or tests/test_ralph.py)\n- [ ] Test generates fresh project from template\n- [ ] Test creates 3 deterministic tasks\n- [ ] Test verifies --tasks 1 completes exactly 1 task\n- [ ] Test verifies unlimited ralph completes all remaining tasks\n- [ ] Tests can be run via a single command","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T07:58:33.202061872-08:00","created_by":"who","updated_at":"2026-01-19T08:07:34.715198517-08:00","closed_at":"2026-01-19T08:07:34.715198517-08:00","close_reason":"Created test-ralph.sh with dry-run mode for setup verification; full test runs actual Claude API","dependencies":[{"issue_id":"ortus-1im","depends_on_id":"ortus-2wr","type":"blocks","created_at":"2026-01-19T07:58:36.920610844-08:00","created_by":"who"}]}
{"id":"ortus-2wr","title":"Epic: Merge ralph.sh and mega-ralph.sh with task limit option","description":"## Summary\n\nConsolidate ralph.sh and mega-ralph.sh into a single script. By default, ralph runs in 'mega' mode (completing all tasks until none remain). A new --tasks N option limits ralph to completing only N tasks.\n\n## Behavior\n\n- `./ralph.sh` - Run until all tasks complete (current mega-ralph behavior)\n- `./ralph.sh --tasks 1` - Complete exactly 1 task then exit\n- `./ralph.sh --tasks 5` - Complete up to 5 tasks then exit\n\n## Changes Required\n\n1. Merge mega-ralph.sh logic into ralph.sh\n2. Add --tasks N option parsing\n3. Remove mega-ralph.sh from template/\n4. Update copier.yaml _tasks to remove mega-ralph.sh from chmod\n5. Update any documentation referencing mega-ralph.sh\n\n## Acceptance Criteria\n\n- [ ] ralph.sh runs all tasks by default (mega mode)\n- [ ] ralph.sh --tasks N completes exactly N tasks\n- [ ] mega-ralph.sh removed from template\n- [ ] Documentation updated","status":"closed","priority":1,"issue_type":"epic","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T07:58:07.674607176-08:00","created_by":"who","updated_at":"2026-01-19T08:02:21.132657779-08:00","closed_at":"2026-01-19T08:02:21.132657779-08:00","close_reason":"Merged mega-ralph.sh into ralph.sh with --tasks N option. Default behavior now runs until queue empty. Added --iterations and --idle-sleep options."}
{"id":"ortus-32f","title":"Test issue for prefix verification","status":"tombstone","priority":4,"issue_type":"task","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:30:05.288089805-08:00","created_by":"who","updated_at":"2026-01-18T10:31:54.104472845-08:00","deleted_at":"2026-01-18T10:31:54.104472845-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"ortus-510","title":"Add tail.sh to template with terminal-agnostic colors","description":"## Summary\n\nMove tail.sh into the template folder so it's included in generated projects, and make its color output work well across different terminal themes (light/dark).\n\n## Tasks\n\n1. **Move tail.sh to template/** - Copy tail.sh into template/ folder so it gets included in generated projects\n\n2. **Add to chmod in _tasks** - Update copier.yaml _tasks to make tail.sh executable\n\n3. **Fix terminal color compatibility** - The current color codes may not display well on all terminal themes (light vs dark backgrounds). Options:\n   - Use semantic ANSI colors (e.g., default foreground/background) instead of specific RGB values\n   - Detect terminal background and adapt colors\n   - Use only bold/dim/underline styling without colors\n   - Use tput for terminal-capability-aware color codes\n   - Offer a --no-color flag\n\n## Research Needed\n\n- Review current color codes in tail.sh\n- Determine which colors are problematic on light vs dark themes\n- Choose best approach for cross-terminal compatibility\n\n## Acceptance Criteria\n\n- [ ] tail.sh exists in template/ and is copied to generated projects\n- [ ] tail.sh is made executable via _tasks in copier.yaml\n- [ ] Colors are readable on both light and dark terminal themes\n- [ ] Fallback works gracefully if terminal doesn't support colors","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T07:29:00.770888854-08:00","created_by":"who","updated_at":"2026-01-19T07:31:43.777847355-08:00","closed_at":"2026-01-19T07:31:43.777847355-08:00","close_reason":"Moved tail.sh to template/, added tput-based terminal-aware colors with NO_COLOR support, added to chmod task in copier.yaml"}
{"id":"ortus-5ic","title":"Implement Q\u0026A completion detection and answer collection","description":"## Overview\nImplement logic to detect when all Q\u0026A subtasks are completed and collect the answers for PRD generation.\n\n## Requirements\n\n### Completion Detection\n- Query subtasks of an idea: `bd list --parent \u003cidea-id\u003e`\n- Check status of each Q\u0026A subtask\n- Determine if ALL subtasks are closed/completed\n- This can be used in a polling loop or triggered by dependency resolution\n\n### Answer Collection\nWhen all Q\u0026A subtasks are closed:\n- Iterate through each subtask\n- Extract answers from:\n  - Subtask description (if human edited it)\n  - Subtask comments (use `bd comments \u003cid\u003e`)\n- Compile answers into structured format:\n  ```\n  Q1: [original question]\n  A1: [collected answer]\n  \n  Q2: [original question]\n  A2: [collected answer]\n  ...\n  ```\n\n### Output Format\n- Return structured data suitable for PRD generation:\n  - Original idea description\n  - List of Q\u0026A pairs\n  - Any additional context/metadata\n\n## Implementation Notes\n- Create as reusable function for prd-pipeline.sh\n- Handle case where subtask has no answer (warn but continue)\n- Consider timeout/staleness detection (optional: warn if Q\u0026A open too long)\n\n## Acceptance Criteria\n- [ ] Correctly detects when all Q\u0026A subtasks are closed\n- [ ] Extracts answers from subtask descriptions\n- [ ] Extracts answers from subtask comments\n- [ ] Compiles structured Q\u0026A output\n- [ ] Handles missing/empty answers gracefully","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:18.206662702-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.420823186-08:00","closed_at":"2026-01-18T09:57:18.363105107-08:00","close_reason":"Done: Created collect-qa.sh for Q\u0026A completion detection and answer collection","dependencies":[{"issue_id":"ortus-5ic","depends_on_id":"ortus-65m","type":"blocks","created_at":"2026-01-18T09:48:17.816948039-08:00","created_by":"who"}]}
{"id":"ortus-65m","title":"Create Q\u0026A subtask generation from idea descriptions","description":"## Overview\nImplement the logic to read an idea's description and generate discovery question subtasks using prd/PRD-PROMPT.md.\n\n## Requirements\n\n### Input Processing\n- Read the idea bead's description field\n- Parse and understand the idea context\n\n### Question Generation\n- Use prd/PRD-PROMPT.md as the prompt template for generating discovery questions\n- Generate 3-7 focused questions that help clarify:\n  - User needs and pain points\n  - Scope and constraints\n  - Success criteria\n  - Technical considerations\n  - Edge cases\n\n### Subtask Creation\nFor each generated question:\n- Create a subtask using `bd create -t task --parent \u003cidea-id\u003e`\n- Set assignee to human (or configurable)\n- Title should be the question itself (truncated if needed)\n- Description should include:\n  - Full question text\n  - Context from the original idea\n  - Instructions: \"Answer by editing this description or adding a comment, then close when done\"\n\n### Dependency Setup\n- Each Q\u0026A subtask should block the parent idea: `bd dep add \u003cidea-id\u003e \u003csubtask-id\u003e`\n- This ensures the idea cannot be closed until all Q\u0026A is complete\n\n## Implementation Notes\n- Create as a function/module that can be called from prd-pipeline.sh\n- Use `bd show \u003cid\u003e --json` to read bead details\n- Return list of created subtask IDs for tracking\n\n## Acceptance Criteria\n- [ ] Reads idea description successfully\n- [ ] Generates relevant discovery questions using PRD-PROMPT.md\n- [ ] Creates subtasks with proper structure\n- [ ] Sets up blocking dependencies correctly\n- [ ] Handles edge cases (empty description, etc.)","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:04.644290147-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.422846246-08:00","closed_at":"2026-01-18T09:51:56.901595213-08:00","close_reason":"Done: Created generate-qa.sh and PRD-QA-PROMPT.md for Q\u0026A subtask generation"}
{"id":"ortus-7ev","title":"Test issue for ortus prefix","status":"tombstone","priority":4,"issue_type":"task","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:30:24.323159646-08:00","created_by":"who","updated_at":"2026-01-18T10:31:54.104472845-08:00","deleted_at":"2026-01-18T10:31:54.104472845-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"ortus-8m5","title":"Rename beads ID prefix from 'copier-project-archetype' to 'ortus'","description":"The project has been renamed to Ortus. Update the beads configuration so that new issues use the 'ortus' prefix instead of 'copier-project-archetype'.\n\n## Files to check:\n- .beads/config.yaml - likely has the project prefix setting\n- Any other beads configuration that sets the issue ID prefix\n\n## Expected outcome:\n- New issues should be created with IDs like 'ortus-abc123' instead of 'copier-project-archetype-abc123'","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:29:21.480075255-08:00","created_by":"who","updated_at":"2026-01-18T10:31:58.0475839-08:00","closed_at":"2026-01-18T10:31:58.0475839-08:00","close_reason":"Renamed prefix from 'copier-project-archetype' to 'ortus' using bd rename-prefix. Also updated .beads/config.yaml with issue-prefix: ortus"}
{"id":"ortus-8rx","title":"Implement PRD generation and task explosion","description":"## Overview\nGenerate the PRD document from collected Q\u0026A answers and explode it into implementation tasks assigned to ralph.\n\n## Requirements\n\n### PRD Generation\n- Input: Original idea + collected Q\u0026A pairs\n- Use prd/PRD-PROMPT.md as the generation template\n- Generate comprehensive PRD document including:\n  - Problem statement\n  - Goals and success metrics\n  - User stories\n  - Technical requirements\n  - Implementation phases\n  - Open questions/risks\n\n### PRD Output\n- Save to: `prd/PRD-[name].md`\n  - [name] derived from idea title (slugified)\n- Include metadata header with:\n  - Source idea ID\n  - Generation date\n  - Q\u0026A summary\n\n### Task Explosion\nAfter PRD generation:\n- Parse the PRD for implementation phases/tasks\n- Create beads for each major work item:\n  - Epics for large phases\n  - Tasks for specific implementations\n- All created beads should be:\n  - Assigned to ralph (--assignee ralph)\n  - Linked as dependencies or children appropriately\n- Reference the PRD document in task descriptions\n\n### Idea Closure\n- After successful PRD generation and task creation\n- Close the original idea: `bd close \u003cidea-id\u003e`\n- Add closing comment summarizing what was created\n\n## Implementation Notes\n- Use Claude to generate PRD content with prd/PRD-PROMPT.md\n- Consider using existing generate-prd.sh as reference\n- Task explosion should be intelligent about granularity\n\n## Acceptance Criteria\n- [ ] Generates well-structured PRD document\n- [ ] Saves PRD to correct location with proper naming\n- [ ] Creates implementation tasks from PRD\n- [ ] Tasks are properly assigned to ralph\n- [ ] Original idea is closed with summary","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:33.918108278-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.417203841-08:00","closed_at":"2026-01-18T10:02:39.096851638-08:00","close_reason":"Done: Created generate-prd-from-qa.sh for PRD generation and task explosion","dependencies":[{"issue_id":"ortus-8rx","depends_on_id":"ortus-5ic","type":"blocks","created_at":"2026-01-18T09:48:18.193874212-08:00","created_by":"who"}]}
{"id":"ortus-8za","title":"Update ralph.sh to use bd ready --assignee ralph","description":"Change the bd ready command in template/ralph.sh to filter by assignee so only issues assigned to 'ralph' are picked up by the automation loop. This prevents the loop from grabbing ideas or other work not intended for automated implementation.","status":"closed","priority":2,"issue_type":"task","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:21:57.877748437-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.429735247-08:00","closed_at":"2026-01-18T09:42:28.445125599-08:00","close_reason":"Done: Updated ralph.sh and PROMPT.md.jinja to use bd ready --assignee ralph"}
{"id":"ortus-90l","title":"Add prerequisite checks to template setup","description":"Add checks at the end of _tasks in copier.yaml (or in a separate script) to verify required tools are installed:\n\n## Required tools to check:\n- `bd` (beads CLI)\n- `claude` (Claude CLI for automation scripts)\n- `jq` (JSON parsing in shell scripts)\n- `git` (version control)\n- `rg` (ripgrep - fast search)\n- `fd` (fd-find - fast file finder)\n\n## Implementation options:\n1. Add a check script that runs after setup\n2. Add inline checks in _tasks\n3. Create a `check-prerequisites.sh` script that users can run\n\nThe checks should:\n- Verify each tool is installed\n- Show helpful error messages with install instructions if missing\n- Not fail the setup, just warn (tools might be installed later)","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:13:55.182188233-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.393386989-08:00","closed_at":"2026-01-18T10:26:03.085091723-08:00","close_reason":"Created check-prerequisites.sh script that verifies bd, claude, jq, git, rg, and fd are installed. Script runs automatically after template setup and warns about missing tools with install hints."}
{"id":"ortus-9pm","title":"Implement lisa.sh PRD document generation","description":"## Summary\n\nWhen interview is complete (prd:ready), use Claude to generate the PRD document.\n\n## Requirements\n\n- Read idea title, description, and collected interview answers\n- Use Claude to generate comprehensive PRD document\n- Save to prd/PRD-\u003cslugified-title\u003e.md\n- PRD should include: overview, requirements, architecture, milestones, epic breakdown\n\n## PRD Structure\n\n```markdown\n# PRD: [Idea Title]\n\n## Metadata\n- Source Idea: \u003cidea-id\u003e\n- Generated: \u003cdate\u003e\n- Status: Draft (awaiting approval)\n\n## Overview\n- Problem Statement\n- Proposed Solution  \n- Success Metrics\n\n## Background \u0026 Context\n## Users \u0026 Personas\n## Requirements (Functional \u0026 Non-Functional)\n## System Architecture\n## Milestones \u0026 Phases\n## Epic Breakdown\n## Open Questions\n## Out of Scope\n```\n\n## Acceptance Criteria\n\n- [ ] PRD generated from idea + interview answers\n- [ ] Saved to prd/PRD-\u003cname\u003e.md\n- [ ] PRD follows standard structure\n- [ ] Idea remains in prd:ready state (awaiting human approval)\n- [ ] Log shows PRD file location","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:19:55.221340525-08:00","created_by":"who","updated_at":"2026-01-19T09:33:42.390679191-08:00","closed_at":"2026-01-19T09:33:42.390679191-08:00","close_reason":"Implemented PRD generation: generate_prd_document() creates PRD from idea+answers via Claude, integrated into interviewing→ready transition, handle_ready() shows PRD status","dependencies":[{"issue_id":"ortus-9pm","depends_on_id":"ortus-om6","type":"blocks","created_at":"2026-01-19T09:21:13.704502581-08:00","created_by":"who"}],"comments":[{"id":13,"issue_id":"ortus-9pm","author":"who","text":"Starting work. Plan: implement generate_prd_document() function that uses Claude to create PRD from idea+answers, integrate into state transition from interviewing→ready","created_at":"2026-01-19T17:32:12Z"},{"id":14,"issue_id":"ortus-9pm","author":"who","text":"Progress: Implemented generate_prd_document(), integrated into handle_interviewing(), updated handle_ready() with PRD status check","created_at":"2026-01-19T17:33:33Z"},{"id":15,"issue_id":"ortus-9pm","author":"who","text":"Verification: bash -n syntax check passes, --help output correct","created_at":"2026-01-19T17:33:37Z"}]}
{"id":"ortus-a1r","title":"Create and validate test-lisa.sh test script","description":"## Summary\n\nCreate a test script for lisa.sh similar to test-ralph.sh. The test should:\n1. Generate a test project from the ortus template\n2. Create an idea assigned to lisa\n3. Run lisa.sh and verify basic functionality\n\n## Acceptance Criteria\n\n- [ ] tests/test-lisa.sh exists\n- [ ] Test generates project in /tmp\n- [ ] Test creates an idea bead assigned to lisa\n- [ ] Test runs lisa.sh\n- [ ] Test passes without errors","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T11:38:58.16629621-08:00","created_by":"who","updated_at":"2026-01-19T11:46:28.556588947-08:00","closed_at":"2026-01-19T11:46:28.556588947-08:00","close_reason":"Verified tests/test-lisa.sh exists and works - dry-run passes","comments":[{"id":34,"issue_id":"ortus-a1r","author":"who","text":"Starting work. Plan: review test-ralph.sh, create test-lisa.sh following same pattern, verify it runs","created_at":"2026-01-19T19:44:27Z"},{"id":35,"issue_id":"ortus-a1r","author":"who","text":"Progress: tests/test-lisa.sh already exists. Validating it meets acceptance criteria.","created_at":"2026-01-19T19:45:45Z"},{"id":36,"issue_id":"ortus-a1r","author":"who","text":"Verification: test-lisa.sh exists, is executable, dry-run passes. Creates test project in /tmp, creates idea assigned to lisa, includes full pipeline testing.","created_at":"2026-01-19T19:46:11Z"}]}
{"id":"ortus-aqz","title":"Delete old PRD scripts from template/","description":"## Summary\n\nRemove the old fragmented PRD scripts that are replaced by lisa.sh.\n\n## Files to Delete\n\n- template/generate-prd.sh\n- template/generate-interview.sh\n- template/collect-interview.sh\n- template/generate-prd-from-interview.sh\n- template/prd-pipeline.sh\n\n## Also Update\n\n- copier.yaml _tasks: Remove references to deleted scripts in chmod command\n- Verify no other files reference these scripts\n\n## Acceptance Criteria\n\n- [ ] All 5 scripts deleted from template/\n- [ ] copier.yaml _tasks updated\n- [ ] No broken references to deleted scripts\n- [ ] Git shows clean removal","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:20:30.932165897-08:00","created_by":"who","updated_at":"2026-01-19T09:42:29.738020264-08:00","closed_at":"2026-01-19T09:42:29.738020264-08:00","close_reason":"Deleted 5 old PRD scripts, updated copier.yaml and README.md","dependencies":[{"issue_id":"ortus-aqz","depends_on_id":"ortus-nxe","type":"blocks","created_at":"2026-01-19T09:21:14.36968777-08:00","created_by":"who"}],"comments":[{"id":18,"issue_id":"ortus-aqz","author":"who","text":"Starting work. Plan: delete 5 old PRD scripts from template/, update copier.yaml chmod list, verify no broken references","created_at":"2026-01-19T17:37:45Z"},{"id":19,"issue_id":"ortus-aqz","author":"who","text":"Progress: Deleted 5 old scripts, updated copier.yaml chmod list and after-copy message, updated README.md references, fixed PRD-INTERVIEW-PROMPT.md reference","created_at":"2026-01-19T17:42:00Z"},{"id":20,"issue_id":"ortus-aqz","author":"who","text":"Verification: git shows clean removals of 5 scripts, no broken references outside .beads/","created_at":"2026-01-19T17:42:24Z"}]}
{"id":"ortus-c39","title":"Rename QA to interview across PRD pipeline","description":"Rename all 'QA' references to 'interview' for clarity. This includes:\n\n## Files to rename:\n- PRD-QA-PROMPT.md → PRD-INTERVIEW-PROMPT.md\n- generate-qa.sh → generate-interview.sh\n- collect-qa.sh → collect-interview.sh\n- generate-prd-from-qa.sh → generate-prd-from-interview.sh\n- .qa-answers-\u003cid\u003e.md → .interview-answers-\u003cid\u003e.md\n\n## Labels to rename:\n- prd:qa-pending → prd:interview-pending\n- prd:qa-complete → prd:interview-complete\n\n## Output tags:\n- \u003cqa-complete\u003e → \u003cinterview-complete\u003e\n\n## Also:\n- Update copier.yaml chmod task\n- Update all internal references in scripts","status":"closed","priority":1,"issue_type":"epic","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:09:12.945965563-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.384547995-08:00","closed_at":"2026-01-18T10:22:56.190437312-08:00","close_reason":"Done: Renamed all QA references to interview across PRD pipeline"}
{"id":"ortus-c39.1","title":"Rename PRD-QA-PROMPT.md to PRD-INTERVIEW-PROMPT.md","description":"- Rename the file\n- Update title and references inside","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:10:42.061945875-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.412053454-08:00","closed_at":"2026-01-18T10:22:51.588294537-08:00","close_reason":"Done: Renamed all QA references to interview","dependencies":[{"issue_id":"ortus-c39.1","depends_on_id":"ortus-c39","type":"parent-child","created_at":"2026-01-18T10:10:42.105322585-08:00","created_by":"who"}]}
{"id":"ortus-c39.2","title":"Rename generate-qa.sh to generate-interview.sh","description":"- Rename the file\n- Update internal comments and messages\n- Update reference to PRD-QA-PROMPT.md → PRD-INTERVIEW-PROMPT.md","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:10:44.656664394-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.409659238-08:00","closed_at":"2026-01-18T10:22:51.603381162-08:00","close_reason":"Done: Renamed all QA references to interview","dependencies":[{"issue_id":"ortus-c39.2","depends_on_id":"ortus-c39","type":"parent-child","created_at":"2026-01-18T10:10:44.683853636-08:00","created_by":"who"}]}
{"id":"ortus-c39.3","title":"Rename collect-qa.sh to collect-interview.sh","description":"- Rename the file\n- Update internal comments and messages\n- Update output file from .qa-answers to .interview-answers","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:10:45.092145045-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.407331534-08:00","closed_at":"2026-01-18T10:22:51.608826779-08:00","close_reason":"Done: Renamed all QA references to interview","dependencies":[{"issue_id":"ortus-c39.3","depends_on_id":"ortus-c39","type":"parent-child","created_at":"2026-01-18T10:10:45.108125694-08:00","created_by":"who"}]}
{"id":"ortus-c39.4","title":"Rename generate-prd-from-qa.sh to generate-prd-from-interview.sh","description":"- Rename the file\n- Update internal comments and messages\n- Update reference to .qa-answers → .interview-answers\n- Update reference to collect-qa.sh → collect-interview.sh","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:10:47.660140247-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.403922193-08:00","closed_at":"2026-01-18T10:22:51.615182556-08:00","close_reason":"Done: Renamed all QA references to interview","dependencies":[{"issue_id":"ortus-c39.4","depends_on_id":"ortus-c39","type":"parent-child","created_at":"2026-01-18T10:10:47.66317071-08:00","created_by":"who"}]}
{"id":"ortus-c39.5","title":"Update prd-pipeline.sh for interview rename","description":"- Update labels: prd:qa-pending → prd:interview-pending, prd:qa-complete → prd:interview-complete\n- Update script references\n- Update log messages","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:10:50.373332017-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.401146988-08:00","closed_at":"2026-01-18T10:22:51.621276035-08:00","close_reason":"Done: Renamed all QA references to interview","dependencies":[{"issue_id":"ortus-c39.5","depends_on_id":"ortus-c39","type":"parent-child","created_at":"2026-01-18T10:10:50.376605322-08:00","created_by":"who"}]}
{"id":"ortus-c39.6","title":"Update copier.yaml for interview rename","description":"- Update chmod task with new script names","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:10:53.180670502-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.397952515-08:00","closed_at":"2026-01-18T10:22:51.626762176-08:00","close_reason":"Done: Renamed all QA references to interview","dependencies":[{"issue_id":"ortus-c39.6","depends_on_id":"ortus-c39","type":"parent-child","created_at":"2026-01-18T10:10:53.184090591-08:00","created_by":"who"}]}
{"id":"ortus-ccg","title":"Remove check-prerequisites.sh from template folder","description":"## Summary\n\ncheck-prerequisites.sh still exists in template/ but prerequisite checking is now handled by the Python extension (extensions/prerequisites.py). The shell script should be removed.\n\n## Current State\n\n- template/check-prerequisites.sh exists\n- copier.yaml _exclude includes check-prerequisites.sh (so it won't be copied)\n- extensions/prerequisites.py handles prereq checking via Jinja extension\n\n## Problem\n\nThe shell script is vestigial - it's excluded from copy but still clutters the template folder.\n\n## Fix\n\nDelete template/check-prerequisites.sh entirely since:\n1. It's already excluded from copying\n2. Prerequisite checking is now done via Python extension\n3. No other scripts reference it\n\n## Acceptance Criteria\n\n- [ ] template/check-prerequisites.sh deleted\n- [ ] Verify extensions/prerequisites.py is working correctly\n- [ ] Remove check-prerequisites.sh from _exclude in copier.yaml (no longer needed)","status":"closed","priority":2,"issue_type":"bug","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T10:08:40.507436543-08:00","created_by":"who","updated_at":"2026-01-19T10:11:26.770141959-08:00","closed_at":"2026-01-19T10:11:26.770141959-08:00","close_reason":"Deleted template/check-prerequisites.sh, removed from copier.yaml _exclude. Extension functionality was already broken (filed ortus-kdb).","comments":[{"id":28,"issue_id":"ortus-ccg","author":"who","text":"Starting work. Plan: delete template/check-prerequisites.sh, update copier.yaml _exclude, verify prereq extension works","created_at":"2026-01-19T18:09:05Z"},{"id":29,"issue_id":"ortus-ccg","author":"who","text":"Progress: shell script deleted, copier.yaml updated. Note: discovered prereq extension (extensions/prerequisites.py) isn't being loaded - pre-existing issue, filed as new bug.","created_at":"2026-01-19T18:11:07Z"},{"id":30,"issue_id":"ortus-ccg","author":"who","text":"Verification: shell script deleted, not in generated projects, _exclude updated. Created ortus-kdb for pre-existing extension loading issue.","created_at":"2026-01-19T18:11:21Z"}]}
{"id":"ortus-i2w","title":"Update generate-prd.sh to create tasks assigned to ralph","description":"Update the PRD-PROMPT.md template's 'Converting to Beads' section. When creating beads tasks from a PRD, ensure the bd create commands include --assignee ralph so the ralph automation loop (which now filters by --assignee ralph) can pick them up.","status":"closed","priority":2,"issue_type":"task","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:40:13.632896993-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.42635932-08:00","closed_at":"2026-01-18T09:44:15.057410437-08:00","close_reason":"Done: Added --assignee ralph to all bd create commands in PRD-PROMPT.md example script","dependencies":[{"issue_id":"ortus-i2w","depends_on_id":"ortus-8za","type":"blocks","created_at":"2026-01-18T09:40:20.632278386-08:00","created_by":"who"}]}
{"id":"ortus-j1f","title":"Epic: Unify PRD pipeline into lisa.sh","description":"## Summary\n\nReplace the fragmented PRD generation scripts with a single unified loop script called `lisa.sh`. Lisa handles the full idea-to-implementation pipeline: receiving ideas, conducting interviews via beads, generating PRDs, and handing off to ralph.\n\n## Current State (to be removed)\n\n- generate-prd.sh - Interactive PRD generation\n- generate-interview.sh - Creates interview question beads\n- collect-interview.sh - Collects answered questions\n- generate-prd-from-interview.sh - Generates PRD from answers\n- prd-pipeline.sh - Orchestrates the async workflow\n\n## New Architecture\n\n### lisa.sh - The unified PRD loop\n\n**Execution model**: Continuous loop (like current prd-pipeline.sh)\n- Runs in background: `./lisa.sh`\n- Polls for ideas assigned to 'lisa'\n- Processes ideas through interview → PRD → handoff stages\n\n**Workflow**:\n1. User submits idea: `bd create --title=\"My idea\" --type=idea --assignee=lisa`\n2. Lisa generates interview questions as child beads (blocking dependencies on the idea)\n3. Human answers by commenting on question beads, then closes them\n4. When all questions closed, Lisa generates PRD document (prd/PRD-\u003cname\u003e.md)\n5. Human reviews PRD, adds 'approved' label when ready\n6. Lisa creates implementation tasks with --assignee=ralph\n7. Ralph picks up tasks and implements\n\n**State tracking via labels**:\n- `prd:interviewing` - Interview questions created, waiting for answers\n- `prd:ready` - Interview complete, PRD generated, awaiting approval\n- `prd:approved` - Human approved, tasks being created for ralph\n- (idea closed after handoff complete)\n\n## Files to Delete\n\n- template/generate-prd.sh\n- template/generate-interview.sh  \n- template/collect-interview.sh\n- template/generate-prd-from-interview.sh\n- template/prd-pipeline.sh\n\n## Files to Create/Update\n\n- template/lisa.sh (new unified script)\n- copier.yaml (_tasks and _message_after_copy)\n- template/prd/PRD-PROMPT.md (may need updates)\n- template/prd/PRD-INTERVIEW-PROMPT.md (may need updates or removal)\n\n## Acceptance Criteria\n\n- [ ] lisa.sh runs as continuous loop processing ideas assigned to 'lisa'\n- [ ] Interview questions created as blocking child beads\n- [ ] Human answers via comments, closes question beads when done\n- [ ] PRD document generated at prd/PRD-\u003cname\u003e.md\n- [ ] Human approval via 'approved' label triggers task creation\n- [ ] Tasks auto-assigned to ralph\n- [ ] Old scripts removed from template/\n- [ ] copier.yaml updated (chmod, messages)\n- [ ] Documentation updated","status":"closed","priority":1,"issue_type":"epic","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:18:18.624203208-08:00","created_by":"who","updated_at":"2026-01-19T09:50:54.378435206-08:00","closed_at":"2026-01-19T09:50:54.378435206-08:00","close_reason":"Epic complete. All 8 subtasks finished: core loop, interview generation, completion detection, PRD generation, approval handoff, script deletion, copier.yaml updates, documentation updates.","comments":[{"id":4,"issue_id":"ortus-j1f","author":"who","text":"Starting work. Plan: This is an epic coordinating 8 subtasks. Will fix dependency structure - subtasks should not depend on parent epic. Then work through critical path: core loop → interview generation → completion detection → PRD generation → approval handoff → cleanup.","created_at":"2026-01-19T17:23:00Z"},{"id":26,"issue_id":"ortus-j1f","author":"who","text":"Verifying epic completion. Plan: check all acceptance criteria against current implementation.","created_at":"2026-01-19T17:49:47Z"},{"id":27,"issue_id":"ortus-j1f","author":"who","text":"Verification: All acceptance criteria confirmed. lisa.sh syntax valid, old scripts removed, copier.yaml updated.","created_at":"2026-01-19T17:50:48Z"}]}
{"id":"ortus-kdb","title":"PrerequisiteChecker extension not loading during template generation","description":"## Summary\n\nThe PrerequisiteChecker extension in extensions/prerequisites.py is not being loaded or executed during template generation. The module's print statements never appear in output.\n\n## Expected Behavior\n\nWhen running `copier copy template /tmp/test`, the extension should print \"Checking prerequisites...\" and show tool availability status.\n\n## Actual Behavior\n\nThe extension output never appears. Debug print statements added to module load time don't appear, indicating the module isn't being loaded at all.\n\n## Technical Details\n\n- extensions/prerequisites.py exists and is correctly formatted\n- copier.yaml includes: `- extensions/prerequisites.py:PrerequisiteChecker` in _jinja_extensions\n- The GitConfigContext extension in extensions/context.py uses the same pattern but its functionality works (git defaults appear)\n\n## Possible Causes\n\n1. ContextHook may not be triggered in certain Copier execution modes\n2. The extension path may need to be absolute or differently specified\n3. Copier may require --trust flag for extensions to load\n\n## Acceptance Criteria\n\n- [ ] PrerequisiteChecker runs during template generation\n- [ ] Output shows tool availability checks with ✓/✗ markers\n","status":"closed","priority":2,"issue_type":"bug","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T10:11:17.259601776-08:00","created_by":"who","updated_at":"2026-01-19T10:18:17.720912408-08:00","closed_at":"2026-01-19T10:18:17.720912408-08:00","close_reason":"Fixed: moved checks to __init__ with flush=True, output now appears at start of template generation","comments":[{"id":31,"issue_id":"ortus-kdb","author":"who","text":"Starting work. Plan: investigate why extension doesn't load, check Copier extension loading pattern, fix and verify with test generation","created_at":"2026-01-19T18:12:23Z"},{"id":32,"issue_id":"ortus-kdb","author":"who","text":"Progress: Found that the extension IS loading - output appears at the end after 'Project created'. The issue is timing - ContextHook runs during Jinja template rendering which happens late. Need to run checks earlier.","created_at":"2026-01-19T18:14:04Z"},{"id":33,"issue_id":"ortus-kdb","author":"who","text":"Verification: Template generation shows prerequisite checks at the start, before the Welcome message. All 6 tools checked with ✓/✗ markers.","created_at":"2026-01-19T18:18:01Z"}]}
{"id":"ortus-mgs","title":"Update PRD prompt templates for lisa.sh","description":"## Summary\n\nReview and update the PRD prompt templates to work with lisa.sh's workflow.\n\n## Files to Review\n\n- template/prd/PRD-PROMPT.md\n- template/prd/PRD-INTERVIEW-PROMPT.md\n\n## Considerations\n\n1. **PRD-PROMPT.md**: May need simplification since lisa.sh handles the orchestration\n2. **PRD-INTERVIEW-PROMPT.md**: May be consolidated into lisa.sh's interview generation logic\n3. Consider whether these files are still needed or if prompts should be inline in lisa.sh\n\n## Options\n\nA. Keep prompt files, reference them from lisa.sh\nB. Inline prompts into lisa.sh functions\nC. Keep PRD-PROMPT.md for structure reference, remove interview prompt\n\n## Acceptance Criteria\n\n- [ ] Prompt templates reviewed for lisa.sh compatibility\n- [ ] Unnecessary prompt files removed or consolidated\n- [ ] Remaining prompts work with lisa.sh workflow\n- [ ] PRD structure maintained in generated documents","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:21:07.892158977-08:00","created_by":"who","updated_at":"2026-01-19T09:48:31.494940495-08:00","closed_at":"2026-01-19T09:48:31.494940495-08:00","close_reason":"Removed PRD-INTERVIEW-PROMPT.md (unused, logic inlined in lisa.sh). Updated PRD-PROMPT.md to document lisa.sh as preferred approach and clarify manual workflow. Updated CLAUDE.md.jinja with lisa.sh references.","comments":[{"id":24,"issue_id":"ortus-mgs","author":"who","text":"Starting work. Plan: review existing prompt templates, check lisa.sh usage, consolidate/cleanup as needed","created_at":"2026-01-19T17:46:12Z"},{"id":25,"issue_id":"ortus-mgs","author":"who","text":"Verification: template generates correctly. PRD-PROMPT.md updated with lisa.sh notes. PRD-INTERVIEW-PROMPT.md removed (logic inlined in lisa.sh).","created_at":"2026-01-19T17:48:26Z"}]}
{"id":"ortus-n75","title":"Implement lisa.sh interview generation","description":"## Summary\n\nImplement the interview generation phase in lisa.sh. When a new idea arrives, Claude generates discovery questions as child beads.\n\n## Requirements\n\n- Use Claude to analyze the idea and generate 3-7 discovery questions\n- Create each question as a child bead (type=task) under the idea\n- Set up blocking dependencies: idea depends on all question beads\n- Add 'prd:interviewing' label to the idea\n- Questions should cover: problem space, users, scope, success criteria, constraints\n\n## Question Bead Format\n\n```bash\nbd create --title=\"Q: [Short question]\" \\\n  --type=task \\\n  --priority=3 \\\n  --assignee=human \\\n  --description=\"## Question\n[Full question text]\n\n## How to Answer\nAdd a comment with your answer, then close this issue.\"\n```\n\nThen: `bd dep add \u003cidea-id\u003e \u003cquestion-id\u003e`\n\n## Acceptance Criteria\n\n- [ ] Claude generates relevant discovery questions for the idea\n- [ ] Questions created as beads assigned to 'human'\n- [ ] Blocking dependencies prevent idea from being 'ready' until questions answered\n- [ ] 'prd:interviewing' label added to idea\n- [ ] Logging shows questions created","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:19:22.9284928-08:00","created_by":"who","updated_at":"2026-01-19T09:27:49.170512919-08:00","closed_at":"2026-01-19T09:27:49.170512919-08:00","close_reason":"Implemented interview generation with Claude. Creates 3-7 question beads with blocking deps and adds prd:interviewing label.","dependencies":[{"issue_id":"ortus-n75","depends_on_id":"ortus-oet","type":"blocks","created_at":"2026-01-19T09:21:12.939879871-08:00","created_by":"who"}],"comments":[{"id":8,"issue_id":"ortus-n75","author":"who","text":"Starting work. Plan: Read lisa.sh core loop, implement handle_new_idea() to call Claude for question generation, create question beads with blocking deps.","created_at":"2026-01-19T17:26:29Z"},{"id":9,"issue_id":"ortus-n75","author":"who","text":"Progress: Implemented generate_interview_questions() and handle_new_idea(). Uses Claude to generate 3-7 questions in XML format, parses and creates beads with blocking deps.","created_at":"2026-01-19T17:27:35Z"},{"id":10,"issue_id":"ortus-n75","author":"who","text":"Verification: Syntax check passes, --help output correct. Full integration test requires Claude API and idea in queue.","created_at":"2026-01-19T17:27:39Z"}]}
{"id":"ortus-nxe","title":"Implement lisa.sh approval and ralph handoff","description":"## Summary\n\nWhen human adds 'approved' label, generate implementation tasks and assign to ralph.\n\n## Requirements\n\n- Detect 'approved' label on ideas with 'prd:ready'\n- Read the generated PRD document\n- Use Claude to break down PRD into implementation tasks\n- Create tasks with --assignee=ralph\n- Set up proper dependencies between tasks\n- Close the original idea with a summary\n\n## Task Creation\n\n```bash\n# For each epic/task from PRD breakdown:\nbd create --title=\"[Task title]\" \\\n  --type=task \\\n  --priority=2 \\\n  --assignee=ralph \\\n  --description=\"[Description with acceptance criteria]\n\nReference: prd/PRD-\u003cname\u003e.md\"\n\n# Set up dependencies\nbd dep add \u003cchild-task\u003e \u003cparent-epic\u003e\n```\n\n## Completion\n\n- Remove prd:ready and approved labels\n- Close the idea: `bd close \u003cidea-id\u003e --reason=\"PRD complete. Created X tasks for ralph.\"`\n\n## Acceptance Criteria\n\n- [ ] Detects 'approved' label\n- [ ] Generates implementation tasks from PRD\n- [ ] All tasks assigned to ralph\n- [ ] Dependencies set up correctly\n- [ ] Original idea closed with summary\n- [ ] Log shows task creation details","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:20:09.95199083-08:00","created_by":"who","updated_at":"2026-01-19T09:36:19.105221489-08:00","closed_at":"2026-01-19T09:36:19.105221489-08:00","close_reason":"Implemented handle_approved() and generate_tasks_from_prd() functions. PRD approval triggers task generation via Claude and closes the idea.","dependencies":[{"issue_id":"ortus-nxe","depends_on_id":"ortus-9pm","type":"blocks","created_at":"2026-01-19T09:21:14.043397175-08:00","created_by":"who"}],"comments":[{"id":16,"issue_id":"ortus-nxe","author":"who","text":"Starting work. Plan: implement handle_approved() function to detect approved label, read PRD, call Claude for task breakdown, create beads with dependencies, and close the idea.","created_at":"2026-01-19T17:34:51Z"},{"id":17,"issue_id":"ortus-nxe","author":"who","text":"Verification: bash syntax check passes, help output correct. Implementation adds generate_tasks_from_prd() and handle_approved() functions. Full integration requires Claude API.","created_at":"2026-01-19T17:35:59Z"}]}
{"id":"ortus-oet","title":"Create lisa.sh core loop structure","description":"## Summary\n\nCreate the main lisa.sh script with the continuous loop structure, similar to ralph.sh.\n\n## Requirements\n\n- Continuous polling loop with configurable interval\n- Logging to logs/lisa-\u003ctimestamp\u003e.log\n- Process ideas assigned to 'lisa' via `bd ready --assignee lisa`\n- State machine based on labels (prd:interviewing, prd:ready, prd:approved)\n- Graceful handling of errors\n\n## Structure\n\n```bash\n#!/bin/bash\n# lisa.sh - PRD generation and idea-to-implementation pipeline\n\nPOLL_INTERVAL=${1:-30}\n\n# Setup logging\nmkdir -p logs\nLOG_FILE=\"logs/lisa-$(date '+%Y%m%d-%H%M%S').log\"\n\nlog() { ... }\n\nprocess_idea() {\n    local idea_id=\"$1\"\n    # Check labels, route to appropriate handler\n    # - No prd: label → start interview\n    # - prd:interviewing → check if interview complete\n    # - prd:ready → waiting for human approval\n    # - prd:approved → generate tasks for ralph\n}\n\n# Main loop\nwhile true; do\n    ideas=$(bd ready --assignee lisa --json)\n    # Process each idea\n    sleep $POLL_INTERVAL\ndone\n```\n\n## Acceptance Criteria\n\n- [ ] lisa.sh created with loop structure\n- [ ] Logging works correctly\n- [ ] Polls for ideas assigned to lisa\n- [ ] State routing based on labels\n- [ ] Handles empty queue gracefully","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:18:53.014750231-08:00","created_by":"who","updated_at":"2026-01-19T09:25:15.303724746-08:00","closed_at":"2026-01-19T09:25:15.303724746-08:00","close_reason":"Created lisa.sh with core loop structure: configurable polling interval, timestamped logging, state routing by prd:* labels, graceful empty queue handling.","comments":[{"id":5,"issue_id":"ortus-oet","author":"who","text":"Starting work. Plan: Create lisa.sh with continuous polling loop, logging infrastructure, state machine based on labels, similar structure to ralph.sh.","created_at":"2026-01-19T17:23:24Z"},{"id":6,"issue_id":"ortus-oet","author":"who","text":"Progress: Core loop structure created with polling, logging, state routing. State handlers are stubbed. Syntax verified, help output working.","created_at":"2026-01-19T17:25:00Z"},{"id":7,"issue_id":"ortus-oet","author":"who","text":"Verification: All acceptance criteria met - loop structure created, logging works, polls for lisa-assigned ideas, routes by prd:* labels, handles empty queue gracefully.","created_at":"2026-01-19T17:25:10Z"}]}
{"id":"ortus-om6","title":"Implement lisa.sh interview completion detection","description":"## Summary\n\nImplement detection of when all interview questions have been answered (closed) by the human.\n\n## Requirements\n\n- Check if idea has 'prd:interviewing' label\n- Query for child question beads that are still open\n- If all question beads are closed → interview is complete\n- Collect answers from question bead comments\n- Transition idea from 'prd:interviewing' to 'prd:ready'\n\n## Logic\n\n```bash\n# Get blockers for this idea\nblockers=$(bd show $idea_id --json | jq '.blocked_by')\nopen_blockers=$(filter for status=open)\n\nif [ open_blockers_count -eq 0 ]; then\n    # All questions answered\\!\n    collect_answers $idea_id\n    bd update $idea_id --remove-label prd:interviewing\n    bd update $idea_id --label prd:ready\nfi\n```\n\n## Answer Collection\n\n- For each closed question bead, extract the comment(s) as the answer\n- Compile into a structured format for PRD generation\n- Store in memory or temp file for next phase\n\n## Acceptance Criteria\n\n- [ ] Detects when all question beads are closed\n- [ ] Collects answers from question bead comments\n- [ ] Transitions label from prd:interviewing to prd:ready\n- [ ] Handles edge cases (no questions, already closed)","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:19:37.579213284-08:00","created_by":"who","updated_at":"2026-01-19T09:30:49.273864609-08:00","closed_at":"2026-01-19T09:30:49.273864609-08:00","close_reason":"Implemented handle_interviewing() and collect_answers() functions with dependency detection, answer collection, and label transitions","dependencies":[{"issue_id":"ortus-om6","depends_on_id":"ortus-n75","type":"blocks","created_at":"2026-01-19T09:21:13.279220264-08:00","created_by":"who"}],"comments":[{"id":11,"issue_id":"ortus-om6","author":"who","text":"Starting work. Plan: implement handle_interviewing() function to detect closed questions, collect answers from comments, and transition labels.","created_at":"2026-01-19T17:29:07Z"},{"id":12,"issue_id":"ortus-om6","author":"who","text":"Verification: syntax check passes, help output correct. Implemented collect_answers() and handle_interviewing() with dependency detection, label transitions.","created_at":"2026-01-19T17:30:28Z"}]}
{"id":"ortus-owu","title":"Update ralph.sh log tailing instructions to mention tail.sh","description":"## Summary\n\nUpdate template/ralph.sh to improve the log tailing instructions shown to users. Currently it just mentions tailing the log file, but should offer two options:\n\n1. **Human-readable output**: Use tail.sh with no arguments - it automatically tails all new additions to files in the logs folder\n2. **Raw output**: Use standard tail -f for a specific log file\n\n## Changes Needed\n\nIn template/ralph.sh, where it mentions tailing logs, update to something like:\n\n```\nTo follow along:\n  Human-readable: ./tail.sh\n  Raw output:     tail -f logs/\u003clogfile\u003e\n```\n\n## Note on tail.sh behavior\n\ntail.sh should automatically watch the logs/ folder and tail all new content from any log files, requiring no arguments from the user.\n\n## Acceptance Criteria\n\n- [ ] ralph.sh shows both tail.sh (no args) and tail -f options when mentioning log following\n- [ ] Instructions are clear about the difference (human-readable auto-follows all logs vs raw single file)\n- [ ] tail.sh example shows no arguments needed","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T07:40:26.505680552-08:00","created_by":"who","updated_at":"2026-01-19T07:44:07.538062398-08:00","closed_at":"2026-01-19T07:44:07.538062398-08:00","close_reason":"Fixed ralph.sh to show tail.sh without arguments (auto-follows all logs)"}
{"id":"ortus-q5p","title":"Update copier.yaml for lisa.sh","description":"## Summary\n\nUpdate copier.yaml to reference lisa.sh and update post-generation messages.\n\n## Changes\n\n### _tasks section\n```yaml\n_tasks:\n  - \"chmod +x ralph.sh lisa.sh tail.sh\"  # Add lisa.sh, remove old scripts\n  - \"git init\"\n  - \"bd init\"\n  - \"git add -A \u0026\u0026 git commit -m 'Initial commit from Ortus template'\"\n```\n\n### _message_after_copy\nUpdate to mention both ralph and lisa:\n\n```yaml\n_message_after_copy: |\n  Project created successfully\\!\n\n  Next steps:\n    cd {{ _copier_conf.dst_path }}\n    \n  To start the idea-to-implementation pipeline:\n    ./lisa.sh          # Processes ideas assigned to 'lisa'\n    \n  To submit an idea:\n    bd create --title=\"Your idea\" --type=idea --assignee=lisa\n    \n  To run the implementation loop:\n    ./ralph.sh         # Processes tasks assigned to 'ralph'\n```\n\n## Acceptance Criteria\n\n- [ ] lisa.sh added to chmod in _tasks\n- [ ] Old script names removed from _tasks\n- [ ] _message_after_copy explains lisa.sh workflow\n- [ ] Message shows how to submit ideas\n- [ ] Message shows how to run ralph","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T09:20:53.872849395-08:00","created_by":"who","updated_at":"2026-01-19T09:45:15.234021604-08:00","closed_at":"2026-01-19T09:45:15.234021604-08:00","close_reason":"copier.yaml already updated. Fixed missing +x on ralph.sh and tail.sh.","dependencies":[{"issue_id":"ortus-q5p","depends_on_id":"ortus-aqz","type":"blocks","created_at":"2026-01-19T09:21:14.665337455-08:00","created_by":"who"}],"comments":[{"id":21,"issue_id":"ortus-q5p","author":"who","text":"Starting work. Plan: Update _tasks chmod list for lisa.sh, update _message_after_copy with lisa workflow instructions.","created_at":"2026-01-19T17:43:36Z"},{"id":22,"issue_id":"ortus-q5p","author":"who","text":"Progress: copier.yaml already had correct lisa.sh entries (from ortus-aqz). Fixed missing execute permissions on ralph.sh and tail.sh in template.","created_at":"2026-01-19T17:44:57Z"},{"id":23,"issue_id":"ortus-q5p","author":"who","text":"Verification: template generation produces lisa.sh, ralph.sh, tail.sh all with +x. No old scripts (generate-prd.sh, etc.) present.","created_at":"2026-01-19T17:45:01Z"}]}
{"id":"ortus-qm6","title":"Fix beads link in README to point to correct repo","description":"The beads link in the README should point to https://github.com/steveyegge/beads\n\nCheck template files for any README or documentation that references beads and update the URL.","status":"closed","priority":2,"issue_type":"bug","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T10:11:42.712733918-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.395591397-08:00","closed_at":"2026-01-18T10:25:22.097970319-08:00","close_reason":"Fixed beads link in README.md from Dicklesworthstone/beads to steveyegge/beads, and bv link from Dicklesworthstone/beads_viewer to steveyegge/beads-viewer"}
{"id":"ortus-qom","title":"Use git config for default author_name and author_email in copier wizard","description":"## Summary\n\nWhen running the copier wizard, the author_name and author_email prompts should default to the user's git config values if available.\n\n## Current Behavior\n\n- author_name defaults to \"Developer\"\n- author_email defaults to \"dev@example.com\"\n\n## Expected Behavior\n\n- author_name should default to $(git config --global user.name) if available, else \"Developer\"\n- author_email should default to $(git config --global user.email) if available, else \"dev@example.com\"\n\n## Implementation\n\nIn copier.yaml, use Jinja2 expressions with shell commands to fetch git config values:\n\n```yaml\nauthor_name:\n  type: str\n  help: Your name\n  default: \"{{ 'git config --global user.name' | shell | trim or 'Developer' }}\"\n\nauthor_email:\n  type: str\n  help: Your email\n  default: \"{{ 'git config --global user.email' | shell | trim or 'dev@example.com' }}\"\n```\n\nNote: Need to verify copier supports the `shell` filter. If not, may need an alternative approach.\n\n## Acceptance Criteria\n\n- [ ] Running copier shows git username as default for author_name (if git configured)\n- [ ] Running copier shows git email as default for author_email (if git configured)\n- [ ] Falls back to \"Developer\" / \"dev@example.com\" if git not configured\n- [ ] Test with and without git config set","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T16:32:16.193657776-08:00","created_by":"who","updated_at":"2026-01-18T16:41:23.162845996-08:00","closed_at":"2026-01-18T16:41:23.162845996-08:00","close_reason":"Implemented git config defaults using copier-template-extensions ContextHook"}
{"id":"ortus-swo","title":"Create prd-pipeline.sh orchestration script","description":"## Overview\nCreate the main orchestration script that ties together all PRD pipeline components into a continuous loop.\n\n## Requirements\n\n### Main Loop Structure\n```bash\n#!/usr/bin/env bash\n# prd-pipeline.sh - Automated PRD generation pipeline\n\nwhile true; do\n    # 1. Check for ideas assigned to prd-pipeline\n    # 2. Process each idea through the pipeline\n    # 3. Sleep and repeat\ndone\n```\n\n### Idea Intake\n- Run `bd ready --assignee prd-pipeline` to find ideas ready for processing\n- Filter to only process ideas (not tasks/epics)\n- Track which ideas are already being processed (avoid duplicate processing)\n\n### Pipeline States\nHandle ideas in different stages:\n\n1. **New idea (no Q\u0026A subtasks)**: \n   - Generate Q\u0026A subtasks (use task copier-project-archetype-65m logic)\n   - Mark as \"in Q\u0026A phase\"\n\n2. **In Q\u0026A phase (has open subtasks)**:\n   - Check if all Q\u0026A subtasks are closed\n   - If not, skip (waiting for human)\n   - Could log status for visibility\n\n3. **Q\u0026A complete (all subtasks closed)**:\n   - Collect answers (use task copier-project-archetype-5ic logic)\n   - Generate PRD and explode tasks (use task copier-project-archetype-8rx logic)\n   - Close idea\n\n### State Tracking\n- Use bead labels or a local state file to track pipeline phase\n- Possible labels: `prd:qa-pending`, `prd:qa-complete`, `prd:generating`\n- Or store state in `.prd-pipeline-state.json`\n\n### Error Handling\n- Catch and log errors for each idea\n- Don't let one failed idea block others\n- Consider retry logic with backoff\n\n### Logging\n- Log pipeline activity for debugging\n- Show which ideas are being processed\n- Report on Q\u0026A waiting status\n\n## Configuration\n- POLL_INTERVAL: How often to check for new ideas (default: 60s)\n- DRY_RUN: Option to simulate without making changes\n\n## File Location\n- Create at: `scripts/prd-pipeline.sh`\n- Make executable\n\n## Acceptance Criteria\n- [ ] Continuously polls for prd-pipeline assigned ideas\n- [ ] Correctly identifies idea pipeline stage\n- [ ] Orchestrates Q\u0026A generation for new ideas\n- [ ] Detects Q\u0026A completion and triggers PRD generation\n- [ ] Handles errors gracefully\n- [ ] Includes logging for observability\n- [ ] Can be run as background process","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:55.3266148-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.413961995-08:00","closed_at":"2026-01-18T10:05:20.086291076-08:00","close_reason":"Done: Created prd-pipeline.sh orchestration script with full async workflow","dependencies":[{"issue_id":"ortus-swo","depends_on_id":"ortus-8rx","type":"blocks","created_at":"2026-01-18T09:48:18.556551508-08:00","created_by":"who"}]}
{"id":"ortus-v3j","title":"Run prerequisite checks without adding shell script to generated project","description":"## Summary\n\nCurrently check-prerequisites.sh is copied into the generated project and run as a _tasks step. We want to run prerequisite checks during copier generation without leaving a shell script in the generated project.\n\n## Current Behavior\n\n- check-prerequisites.sh is copied to the generated project\n- It's run as a _tasks step: `./check-prerequisites.sh`\n- The script remains in the project after generation\n\n## Desired Behavior\n\n- Prerequisite checks run during copier generation\n- No check-prerequisites.sh file left in the generated project\n\n## Possible Approaches\n\n1. **Copier extension (Python)** - Add a Jinja extension or context that runs checks and reports results\n2. **_tasks with inline commands** - Run checks inline in _tasks without a script file\n3. **Post-generation hook** - Use copier's task system to run checks from the template directory (not copied)\n4. **Add to _exclude** - Keep script in template/ but exclude from copy, reference by full path in _tasks\n\n## Acceptance Criteria\n\n- [ ] Prerequisite checks still run during project generation\n- [ ] No check-prerequisites.sh in the generated project\n- [ ] Clear error messages if prerequisites missing\n- [ ] Works on Linux/macOS","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T07:06:34.969396892-08:00","created_by":"who","updated_at":"2026-01-19T07:11:12.006493284-08:00","closed_at":"2026-01-19T07:11:12.006493284-08:00","close_reason":"Implemented prerequisite checks as Copier extension instead of shell script"}
{"id":"ortus-yao","title":"PRD pipeline creates tasks without assigning to ralph","description":"When creating a new project via the PRD pipeline, the generated shell script creates beads tasks but does not assign them to ralph. This causes the ralph loop to have no tasks to work on, requiring manual intervention to assign all tasks to ralph.\n\n**Steps to reproduce:**\n1. Use the PRD pipeline to create a new project\n2. Complete the interview process\n3. Observe the generated bd create commands in the shell script\n4. Note that tasks are created without --assignee=ralph\n\n**Expected behavior:**\nTasks created by the PRD pipeline should be automatically assigned to ralph so they appear in ralph's work queue.\n\n**Actual behavior:**\nTasks are created unassigned, causing ralph loop to have no work.","status":"closed","priority":2,"issue_type":"bug","owner":"githubwho@gmail.com","created_at":"2026-01-18T16:21:51.907096077-08:00","created_by":"who","updated_at":"2026-01-18T16:24:14.670521875-08:00","closed_at":"2026-01-18T16:24:14.670521875-08:00","close_reason":"Fixed by adding explicit CRITICAL reminders in generate-prd-from-interview.sh and PRD-PROMPT.md that all bd create commands MUST include --assignee=ralph"}
{"id":"ortus-yfp","title":"Refactor test-ralph.sh into tests/ folder with external task definitions","description":"## Summary\n\nThe current test-ralph.sh is insufficient. It needs to be moved to a tests/ folder and refactored to create beads tasks from an external definition file rather than inline.\n\n## Current Problems\n\n- test-ralph.sh is in the root directory, should be in tests/\n- Task definitions are inline in the test script\n- Tasks need clearer acceptance criteria and descriptions\n\n## Required Changes\n\n### 1. Create tests/ folder structure\n```\ntests/\n├── test-ralph.sh          # Main test runner\n└── fixtures/\n    └── calculator-tasks.md  # Task definitions file\n```\n\n### 2. Create task definition file (tests/fixtures/calculator-tasks.md)\n\nDefine 3 simple tasks with clear descriptions and acceptance criteria. Example:\n\n```markdown\n# Task 1: Create greeting module\nCreate a file src/greeting.py with a greet() function that returns 'Hello, World!'\n\n## Acceptance Criteria\n- File src/greeting.py exists\n- Function greet() is defined\n- greet() returns the string 'Hello, World!'\n\n---\n\n# Task 2: Add personalized greeting\nAdd a greet_person(name) function to src/greeting.py that returns 'Hello, {name}!'\n\n## Acceptance Criteria\n- Function greet_person(name) is defined in src/greeting.py\n- greet_person('Alice') returns 'Hello, Alice!'\n\n---\n\n# Task 3: Add farewell function\nAdd a farewell(name) function to src/greeting.py that returns 'Goodbye, {name}!'\n\n## Acceptance Criteria\n- Function farewell(name) is defined in src/greeting.py\n- farewell('Bob') returns 'Goodbye, Bob!'\n```\n\n### 3. Update test-ralph.sh\n\n- Move to tests/test-ralph.sh\n- Read task definitions from tests/fixtures/calculator-tasks.md\n- Create beads tasks in the tmp test project's beads context\n- Parse the markdown file to extract title, description, and acceptance criteria for each task\n\n## Acceptance Criteria\n\n- [ ] tests/ folder exists with test-ralph.sh\n- [ ] tests/fixtures/calculator-tasks.md defines 3 simple tasks\n- [ ] Tasks have clear descriptions and acceptance criteria\n- [ ] test-ralph.sh reads from the fixture file\n- [ ] Tasks are created in the tmp project's beads context (not ortus's)\n- [ ] Old test-ralph.sh removed from root","status":"closed","priority":2,"issue_type":"bug","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-19T08:17:19.97454005-08:00","created_by":"who","updated_at":"2026-01-19T08:20:49.773501195-08:00","closed_at":"2026-01-19T08:20:49.773501195-08:00","close_reason":"Refactored test-ralph.sh into tests/ folder with external fixture file for task definitions","comments":[{"id":1,"issue_id":"ortus-yfp","author":"who","text":"Starting work. Plan: create tests/ folder structure, create calculator-tasks.md fixture, refactor test-ralph.sh to read from fixture and create tasks in tmp project context","created_at":"2026-01-19T16:17:59Z"},{"id":2,"issue_id":"ortus-yfp","author":"who","text":"Progress: folder structure created, fixture file created, test-ralph.sh refactored with --body-file for descriptions, old root file removed","created_at":"2026-01-19T16:20:33Z"},{"id":3,"issue_id":"ortus-yfp","author":"who","text":"Verification: dry-run mode passes - creates 3 tasks with descriptions and acceptance criteria from fixture file, sets up correct dependency chain, 1 ready task due to deps","created_at":"2026-01-19T16:20:45Z"}]}
{"id":"ortus-yzc","title":"Implement PRD pipeline with async human Q\u0026A via subtasks","description":"Create an automated PRD pipeline that:\n\n1. **Idea Intake**: Picks up ideas assigned to 'prd-pipeline' via `bd ready --assignee prd-pipeline`\n\n2. **Async Q\u0026A via Subtasks**: Instead of interactive interviews, the pipeline:\n   - Reads the idea description\n   - Uses prd/PRD-PROMPT.md to generate discovery questions\n   - Creates subtasks for each question (assigned to a human)\n   - Human answers questions by updating the subtask description or adding comments\n   - Human closes subtask when answered\n   - Pipeline waits for all Q\u0026A subtasks to close (uses dependency blocking)\n\n3. **PRD Generation**: Once all Q\u0026A subtasks are closed:\n   - Collects answers from subtasks\n   - Generates PRD document to prd/PRD-[name].md using prd/PRD-PROMPT.md\n   - Explodes PRD into implementation tasks/epics assigned to 'ralph'\n   - Closes the original idea\n\n**Scripts needed**:\n- `prd-pipeline.sh` - Loop that runs `bd ready --assignee prd-pipeline`\n\n**Workflow**:\n```\nHuman creates idea (assignee: prd-pipeline)\n    ↓\nprd-pipeline.sh picks it up\n    ↓\nCreates Q\u0026A subtasks (assignee: human, blocks: idea)\n    ↓\nHuman answers async, closes subtasks\n    ↓\nPipeline detects all Q\u0026A done\n    ↓\nGenerates PRD using prd/PRD-PROMPT.md, explodes to tasks (assignee: ralph)\n    ↓\nralph.sh picks up implementation work\n```","status":"closed","priority":1,"issue_type":"epic","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:28:49.389780558-08:00","created_by":"who","updated_at":"2026-01-18T10:31:41.389311366-08:00","closed_at":"2026-01-18T10:05:28.34722572-08:00","close_reason":"Done: Implemented full async PRD pipeline with generate-qa.sh, collect-qa.sh, generate-prd-from-qa.sh, and prd-pipeline.sh"}

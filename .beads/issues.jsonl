{"id":"copier-project-archetype-5ic","title":"Implement Q\u0026A completion detection and answer collection","description":"## Overview\nImplement logic to detect when all Q\u0026A subtasks are completed and collect the answers for PRD generation.\n\n## Requirements\n\n### Completion Detection\n- Query subtasks of an idea: `bd list --parent \u003cidea-id\u003e`\n- Check status of each Q\u0026A subtask\n- Determine if ALL subtasks are closed/completed\n- This can be used in a polling loop or triggered by dependency resolution\n\n### Answer Collection\nWhen all Q\u0026A subtasks are closed:\n- Iterate through each subtask\n- Extract answers from:\n  - Subtask description (if human edited it)\n  - Subtask comments (use `bd comments \u003cid\u003e`)\n- Compile answers into structured format:\n  ```\n  Q1: [original question]\n  A1: [collected answer]\n  \n  Q2: [original question]\n  A2: [collected answer]\n  ...\n  ```\n\n### Output Format\n- Return structured data suitable for PRD generation:\n  - Original idea description\n  - List of Q\u0026A pairs\n  - Any additional context/metadata\n\n## Implementation Notes\n- Create as reusable function for prd-pipeline.sh\n- Handle case where subtask has no answer (warn but continue)\n- Consider timeout/staleness detection (optional: warn if Q\u0026A open too long)\n\n## Acceptance Criteria\n- [ ] Correctly detects when all Q\u0026A subtasks are closed\n- [ ] Extracts answers from subtask descriptions\n- [ ] Extracts answers from subtask comments\n- [ ] Compiles structured Q\u0026A output\n- [ ] Handles missing/empty answers gracefully","status":"open","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:18.206662702-08:00","created_by":"who","updated_at":"2026-01-18T09:47:18.206662702-08:00","dependencies":[{"issue_id":"copier-project-archetype-5ic","depends_on_id":"copier-project-archetype-65m","type":"blocks","created_at":"2026-01-18T09:48:17.816948039-08:00","created_by":"who"}]}
{"id":"copier-project-archetype-65m","title":"Create Q\u0026A subtask generation from idea descriptions","description":"## Overview\nImplement the logic to read an idea's description and generate discovery question subtasks using prd/PRD-PROMPT.md.\n\n## Requirements\n\n### Input Processing\n- Read the idea bead's description field\n- Parse and understand the idea context\n\n### Question Generation\n- Use prd/PRD-PROMPT.md as the prompt template for generating discovery questions\n- Generate 3-7 focused questions that help clarify:\n  - User needs and pain points\n  - Scope and constraints\n  - Success criteria\n  - Technical considerations\n  - Edge cases\n\n### Subtask Creation\nFor each generated question:\n- Create a subtask using `bd create -t task --parent \u003cidea-id\u003e`\n- Set assignee to human (or configurable)\n- Title should be the question itself (truncated if needed)\n- Description should include:\n  - Full question text\n  - Context from the original idea\n  - Instructions: \"Answer by editing this description or adding a comment, then close when done\"\n\n### Dependency Setup\n- Each Q\u0026A subtask should block the parent idea: `bd dep add \u003cidea-id\u003e \u003csubtask-id\u003e`\n- This ensures the idea cannot be closed until all Q\u0026A is complete\n\n## Implementation Notes\n- Create as a function/module that can be called from prd-pipeline.sh\n- Use `bd show \u003cid\u003e --json` to read bead details\n- Return list of created subtask IDs for tracking\n\n## Acceptance Criteria\n- [ ] Reads idea description successfully\n- [ ] Generates relevant discovery questions using PRD-PROMPT.md\n- [ ] Creates subtasks with proper structure\n- [ ] Sets up blocking dependencies correctly\n- [ ] Handles edge cases (empty description, etc.)","status":"closed","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:04.644290147-08:00","created_by":"who","updated_at":"2026-01-18T09:51:56.901595213-08:00","closed_at":"2026-01-18T09:51:56.901595213-08:00","close_reason":"Done: Created generate-qa.sh and PRD-QA-PROMPT.md for Q\u0026A subtask generation"}
{"id":"copier-project-archetype-8rx","title":"Implement PRD generation and task explosion","description":"## Overview\nGenerate the PRD document from collected Q\u0026A answers and explode it into implementation tasks assigned to ralph.\n\n## Requirements\n\n### PRD Generation\n- Input: Original idea + collected Q\u0026A pairs\n- Use prd/PRD-PROMPT.md as the generation template\n- Generate comprehensive PRD document including:\n  - Problem statement\n  - Goals and success metrics\n  - User stories\n  - Technical requirements\n  - Implementation phases\n  - Open questions/risks\n\n### PRD Output\n- Save to: `prd/PRD-[name].md`\n  - [name] derived from idea title (slugified)\n- Include metadata header with:\n  - Source idea ID\n  - Generation date\n  - Q\u0026A summary\n\n### Task Explosion\nAfter PRD generation:\n- Parse the PRD for implementation phases/tasks\n- Create beads for each major work item:\n  - Epics for large phases\n  - Tasks for specific implementations\n- All created beads should be:\n  - Assigned to ralph (--assignee ralph)\n  - Linked as dependencies or children appropriately\n- Reference the PRD document in task descriptions\n\n### Idea Closure\n- After successful PRD generation and task creation\n- Close the original idea: `bd close \u003cidea-id\u003e`\n- Add closing comment summarizing what was created\n\n## Implementation Notes\n- Use Claude to generate PRD content with prd/PRD-PROMPT.md\n- Consider using existing generate-prd.sh as reference\n- Task explosion should be intelligent about granularity\n\n## Acceptance Criteria\n- [ ] Generates well-structured PRD document\n- [ ] Saves PRD to correct location with proper naming\n- [ ] Creates implementation tasks from PRD\n- [ ] Tasks are properly assigned to ralph\n- [ ] Original idea is closed with summary","status":"open","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:33.918108278-08:00","created_by":"who","updated_at":"2026-01-18T09:47:33.918108278-08:00","dependencies":[{"issue_id":"copier-project-archetype-8rx","depends_on_id":"copier-project-archetype-5ic","type":"blocks","created_at":"2026-01-18T09:48:18.193874212-08:00","created_by":"who"}]}
{"id":"copier-project-archetype-8za","title":"Update ralph.sh to use bd ready --assignee ralph","description":"Change the bd ready command in template/ralph.sh to filter by assignee so only issues assigned to 'ralph' are picked up by the automation loop. This prevents the loop from grabbing ideas or other work not intended for automated implementation.","status":"closed","priority":2,"issue_type":"task","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:21:57.877748437-08:00","created_by":"who","updated_at":"2026-01-18T09:42:28.445125599-08:00","closed_at":"2026-01-18T09:42:28.445125599-08:00","close_reason":"Done: Updated ralph.sh and PROMPT.md.jinja to use bd ready --assignee ralph"}
{"id":"copier-project-archetype-i2w","title":"Update generate-prd.sh to create tasks assigned to ralph","description":"Update the PRD-PROMPT.md template's 'Converting to Beads' section. When creating beads tasks from a PRD, ensure the bd create commands include --assignee ralph so the ralph automation loop (which now filters by --assignee ralph) can pick them up.","status":"closed","priority":2,"issue_type":"task","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:40:13.632896993-08:00","created_by":"who","updated_at":"2026-01-18T09:44:15.057410437-08:00","closed_at":"2026-01-18T09:44:15.057410437-08:00","close_reason":"Done: Added --assignee ralph to all bd create commands in PRD-PROMPT.md example script","dependencies":[{"issue_id":"copier-project-archetype-i2w","depends_on_id":"copier-project-archetype-8za","type":"blocks","created_at":"2026-01-18T09:40:20.632278386-08:00","created_by":"who"}]}
{"id":"copier-project-archetype-swo","title":"Create prd-pipeline.sh orchestration script","description":"## Overview\nCreate the main orchestration script that ties together all PRD pipeline components into a continuous loop.\n\n## Requirements\n\n### Main Loop Structure\n```bash\n#!/usr/bin/env bash\n# prd-pipeline.sh - Automated PRD generation pipeline\n\nwhile true; do\n    # 1. Check for ideas assigned to prd-pipeline\n    # 2. Process each idea through the pipeline\n    # 3. Sleep and repeat\ndone\n```\n\n### Idea Intake\n- Run `bd ready --assignee prd-pipeline` to find ideas ready for processing\n- Filter to only process ideas (not tasks/epics)\n- Track which ideas are already being processed (avoid duplicate processing)\n\n### Pipeline States\nHandle ideas in different stages:\n\n1. **New idea (no Q\u0026A subtasks)**: \n   - Generate Q\u0026A subtasks (use task copier-project-archetype-65m logic)\n   - Mark as \"in Q\u0026A phase\"\n\n2. **In Q\u0026A phase (has open subtasks)**:\n   - Check if all Q\u0026A subtasks are closed\n   - If not, skip (waiting for human)\n   - Could log status for visibility\n\n3. **Q\u0026A complete (all subtasks closed)**:\n   - Collect answers (use task copier-project-archetype-5ic logic)\n   - Generate PRD and explode tasks (use task copier-project-archetype-8rx logic)\n   - Close idea\n\n### State Tracking\n- Use bead labels or a local state file to track pipeline phase\n- Possible labels: `prd:qa-pending`, `prd:qa-complete`, `prd:generating`\n- Or store state in `.prd-pipeline-state.json`\n\n### Error Handling\n- Catch and log errors for each idea\n- Don't let one failed idea block others\n- Consider retry logic with backoff\n\n### Logging\n- Log pipeline activity for debugging\n- Show which ideas are being processed\n- Report on Q\u0026A waiting status\n\n## Configuration\n- POLL_INTERVAL: How often to check for new ideas (default: 60s)\n- DRY_RUN: Option to simulate without making changes\n\n## File Location\n- Create at: `scripts/prd-pipeline.sh`\n- Make executable\n\n## Acceptance Criteria\n- [ ] Continuously polls for prd-pipeline assigned ideas\n- [ ] Correctly identifies idea pipeline stage\n- [ ] Orchestrates Q\u0026A generation for new ideas\n- [ ] Detects Q\u0026A completion and triggers PRD generation\n- [ ] Handles errors gracefully\n- [ ] Includes logging for observability\n- [ ] Can be run as background process","status":"open","priority":2,"issue_type":"task","assignee":"ralph","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:47:55.3266148-08:00","created_by":"who","updated_at":"2026-01-18T09:47:55.3266148-08:00","dependencies":[{"issue_id":"copier-project-archetype-swo","depends_on_id":"copier-project-archetype-8rx","type":"blocks","created_at":"2026-01-18T09:48:18.556551508-08:00","created_by":"who"}]}
{"id":"copier-project-archetype-yzc","title":"Implement PRD pipeline with async human Q\u0026A via subtasks","description":"Create an automated PRD pipeline that:\n\n1. **Idea Intake**: Picks up ideas assigned to 'prd-pipeline' via `bd ready --assignee prd-pipeline`\n\n2. **Async Q\u0026A via Subtasks**: Instead of interactive interviews, the pipeline:\n   - Reads the idea description\n   - Uses prd/PRD-PROMPT.md to generate discovery questions\n   - Creates subtasks for each question (assigned to a human)\n   - Human answers questions by updating the subtask description or adding comments\n   - Human closes subtask when answered\n   - Pipeline waits for all Q\u0026A subtasks to close (uses dependency blocking)\n\n3. **PRD Generation**: Once all Q\u0026A subtasks are closed:\n   - Collects answers from subtasks\n   - Generates PRD document to prd/PRD-[name].md using prd/PRD-PROMPT.md\n   - Explodes PRD into implementation tasks/epics assigned to 'ralph'\n   - Closes the original idea\n\n**Scripts needed**:\n- `prd-pipeline.sh` - Loop that runs `bd ready --assignee prd-pipeline`\n\n**Workflow**:\n```\nHuman creates idea (assignee: prd-pipeline)\n    ↓\nprd-pipeline.sh picks it up\n    ↓\nCreates Q\u0026A subtasks (assignee: human, blocks: idea)\n    ↓\nHuman answers async, closes subtasks\n    ↓\nPipeline detects all Q\u0026A done\n    ↓\nGenerates PRD using prd/PRD-PROMPT.md, explodes to tasks (assignee: ralph)\n    ↓\nralph.sh picks up implementation work\n```","status":"open","priority":1,"issue_type":"epic","owner":"githubwho@gmail.com","created_at":"2026-01-18T09:28:49.389780558-08:00","created_by":"who","updated_at":"2026-01-18T09:28:49.389780558-08:00"}

_min_copier_version: "9.0.0"

_jinja_extensions:
  - copier_templates_extensions.TemplateExtensionLoader
  - extensions/context.py:GitConfigContext
  - extensions/prerequisites.py:PrerequisiteChecker

_message_before_copy: |
  Welcome to Ortus — the origin of your next project.

  This will create a new project with:
  - Beads issue tracking
  - Claude Code configuration
  - Ralph loop automation
  - PRD templates

_message_after_copy: |
  Project created successfully!

  Next steps:
    cd {{ _copier_conf.dst_path }}
    ./interview.sh   # Interactive interview → PRD → task creation
    ./ralph.sh       # Implements the tasks

# =============================================================================
# Project Basics
# =============================================================================

project_name:
  type: str
  help: What is your project name? (lowercase, hyphens allowed)
  validator: >-
    {% if not project_name | regex_search('^[a-z][a-z0-9-]*$') %}
    Project name must be lowercase, start with a letter, and contain only letters, numbers, and hyphens.
    {% endif %}

project_description:
  type: str
  help: Short description of your project
  default: "A new project"

author_name:
  type: str
  help: Your name
  default: "{{ git_user_name }}"

author_email:
  type: str
  help: Your email
  default: "{{ git_user_email }}"

# =============================================================================
# Technology Stack
# =============================================================================

language:
  type: str
  help: Primary programming language
  choices:
    TypeScript: typescript
    Python: python
    Go: go
    Rust: rust
    Other: other
  default: typescript

package_manager:
  type: str
  help: Package manager to use
  choices:
    bun (Node.js): bun
    npm (Node.js): npm
    pnpm (Node.js): pnpm
    yarn (Node.js): yarn
    uv (Python): uv
    pip (Python): pip
    go mod (Go): gomod
    cargo (Rust): cargo
    None: none
  default: npm
  when: "{{ language != 'other' }}"

framework:
  type: str
  help: Web framework (optional)
  choices:
    Next.js (Node.js): nextjs
    FastAPI (Python): fastapi
    Flask (Python): flask
    Django (Python): django
    Express (Node.js): express
    Gin (Go): gin
    Actix (Rust): actix
    Axum (Rust): axum
    None: none
  default: none

linter:
  type: str
  help: Linter to use
  choices:
    ESLint (JavaScript/TypeScript): eslint
    ruff (Python): ruff
    golangci-lint (Go): golangci
    clippy (Rust): clippy
    None: none
  default: eslint
  when: "{{ language != 'other' }}"

# =============================================================================
# Repository
# =============================================================================

github_username:
  type: str
  help: GitHub username or organization (for repo URL)
  default: ""

# =============================================================================
# Optional Features
# =============================================================================

license:
  type: str
  help: License for your project
  choices:
    MIT: MIT
    Apache 2.0: Apache-2.0
    GPL 3.0: GPL-3.0
    BSD 3-Clause: BSD-3-Clause
    Proprietary: proprietary
    None: none
  default: MIT

# =============================================================================
# Copier Settings
# =============================================================================

_subdirectory: template

_exclude:
  - copier.yaml
  - "*.pyc"
  - __pycache__
  - .git
  - .DS_Store

_skip_if_exists:
  - activity.md
  - ".beads/*"

_tasks:
  - "chmod +x ralph.sh interview.sh idea.sh tail.sh"
  - "git init"
  - "bd init"
  - "git add -A && git commit -m 'Initial commit from Ortus template'"
  - "./idea.sh"
